<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ãƒãƒ¯ã‚¤æ—…ç¨‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ 2026 (Final)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #fdfcf8;
            color: #44403c;
            -webkit-font-smoothing: antialiased;
        }
        .nav-item.active {
            border-bottom: 3px solid #0d9488;
            color: #0f766e;
            font-weight: 700;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .chart-wrapper {
            position: relative; width: 100%; margin: 0 auto;
            height: 280px; max-height: 400px;
        }
        html { scroll-behavior: smooth; }
        /* Safe Area Support for iPhone */
        .mb-safe {
            margin-bottom: env(safe-area-inset-bottom, 20px);
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom, 20px);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-stone-50">

    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-sm shadow-sm sticky top-0 z-50 border-b border-stone-100 pt-[env(safe-area-inset-top)]">
        <div class="max-w-6xl mx-auto">
            <div class="flex flex-col">
                <div class="flex items-center justify-center h-12 border-b border-stone-50 md:border-none md:justify-start md:h-16 md:px-4">
                    <span class="text-xl mr-2">ğŸŒº</span>
                    <span class="font-bold text-lg tracking-wide text-teal-800">Hawaii 2026 (Final)</span>
                </div>
                <div class="flex overflow-x-auto no-scrollbar px-2 md:px-4">
                    <button onclick="app.navigate('dashboard')" id="nav-dashboard" class="nav-item active flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap">æ¦‚è¦</button>
                    <button onclick="app.navigate('itinerary')" id="nav-itinerary" class="nav-item flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap">æ—…ç¨‹è©³ç´°</button>
                    <button onclick="app.navigate('spots')" id="nav-spots" class="nav-item flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap">ã‚¹ãƒãƒƒãƒˆ</button>
                    <button onclick="app.navigate('packing')" id="nav-packing" class="nav-item flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap">æŒã¡ç‰©</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow max-w-6xl mx-auto px-4 py-6 w-full pb-20"></main>

    <!-- Footer -->
    <footer class="bg-stone-100 mt-auto py-8 border-t border-stone-200 mb-safe">
        <div class="max-w-6xl mx-auto px-4 text-center text-stone-500 text-sm">
            <p class="font-medium text-teal-700">Mahalo! ğŸŒ´</p>
        </div>
    </footer>

    <script>
        const tripData = {
            meta: {
                dates: "2026/01/06(ç«) ã€œ 01/15(æœ¨)",
                nights: 8,
                hotel: "Sheraton Waikiki",
                hotelMap: "https://www.google.com/maps/search/?api=1&query=Sheraton+Waikiki",
                theme: "æœã¯ãƒ›ãƒ†ãƒ«ã§å„ªé›…ã«ã€‚æ˜¼ã¯è»½ã‚ã€å¤œã¯ç¾é£Ÿã€‚"
            },
            days: [
                {
                    id: 1, date: "1/6(ç«)", title: "åˆ°ç€ & ã‚¢ã‚µã‚¤ãƒ¼", icon: "ğŸ›¬",
                    summary: "åˆ°ç€å¾Œã€ãƒŠãƒ«ãƒ»ãƒ˜ãƒ«ã‚¹ãƒãƒ¼ã§ã‚¢ã‚µã‚¤ãƒ¼ã€‚å¤œã¯æ¥µä¸Šã‚¤ã‚¿ãƒªã‚¢ãƒ³ã€‚",
                    budgetEst: 100,
                    timeline: [
                        { time: "11:30", type: "hotel", title: "è·ç‰©é ã‘", desc: "ã‚·ã‚§ãƒ©ãƒˆãƒ³ã¸ã€‚", map: null },
                        { time: "12:00", type: "food", title: "Nalu Health Bar & Cafe", desc: "ã€ãƒ©ãƒ³ãƒã€‘ãƒ¯ã‚¤ã‚­ã‚­åº—ã§ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªã‚¢ã‚µã‚¤ãƒ¼ãƒœã‚¦ãƒ«ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Nalu+Health+Bar+%26+Cafe+Waikiki" },
                        { time: "15:00", type: "hotel", title: "ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³", desc: "ã‚·ãƒ£ãƒ¯ãƒ¼ã‚’æµ´ã³ã¦ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã€‚", map: null },
                        { time: "19:00", type: "food", title: "Arancino di Mare", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘ã‚¦ãƒ‹ã®ã‚¯ãƒªãƒ¼ãƒ ãƒ‘ã‚¹ã‚¿ ($80ã€œ)ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Arancino+di+Mare" }
                    ]
                },
                {
                    id: 2, date: "1/7(æ°´)", title: "ã‚¤ãƒ«ã‚« & ãƒ—ãƒ¼ãƒ«", icon: "ğŸ¬",
                    summary: "æ—©æœã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å¾Œã¯ã€ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ãƒã¨ãƒ—ãƒ¼ãƒ«ã§å›å¾©ã€‚",
                    budgetEst: 350,
                    timeline: [
                        { time: "06:30", type: "transport", title: "ãŠè¿ãˆå‡ºç™º", desc: "è¥¿æµ·å²¸ã¸é å¾ã€‚", map: null },
                        { time: "07:00", type: "activity", title: "ã‚¤ãƒ«ã‚« & ã‚·ãƒ¥ãƒãƒ¼ã‚±ãƒ«", desc: "é‡ç”Ÿã®ã‚¤ãƒ«ã‚«ã¨æ³³ãä½“é¨“ã€‚", map: null },
                        { time: "13:00", type: "food", title: "ãƒ•ãƒªãƒ¼ / è»½é£Ÿ", desc: "ã€ãƒ©ãƒ³ãƒã€‘ãŠã‚€ã™ã³(ã„ã‚„ã™å¤¢)ã‚„ã€ãƒ›ãƒ†ãƒ«è¿‘ãã§è»½ãã€‚", map: "https://www.google.com/maps/search/?api=1&query=Musubi+Cafe+Iyasume+Waikiki" },
                        { time: "15:00", type: "relax", title: "ã‚¤ãƒ³ãƒ•ã‚£ãƒ‹ãƒ†ã‚£ãƒ—ãƒ¼ãƒ«", desc: "ãƒ›ãƒ†ãƒ«ã§ã®ã‚“ã³ã‚Šã€‚", map: null },
                        { time: "18:00", type: "food", title: "Hy's Steak House", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘ã‚¯ãƒ©ã‚·ãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ã‚­ã€‚ãƒ‰ãƒ¬ã‚¹ã‚³ãƒ¼ãƒ‰æœ‰ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Hy's+Steak+House+Waikiki" }
                    ]
                },
                {
                    id: 3, date: "1/8(æœ¨)", title: "ãƒ€ã‚¤ãƒ¤ãƒ˜ãƒƒãƒ‰(è»Šç„¡)", icon: "â›°ï¸",
                    summary: "æœãƒã‚¤ã‚­ãƒ³ã‚°ã€‚åˆå¾Œã¯è¿‘å ´ã§ã‚†ã£ãŸã‚Šä¸­è¯ã€‚",
                    budgetEst: 100,
                    timeline: [
                        { time: "07:00", type: "transport", title: "Uberã§ç§»å‹•", desc: "ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ãªã—ã§ç§»å‹•ã€‚", map: null },
                        { time: "07:30", type: "activity", title: "Diamond Head", desc: "ã€è¦äºˆç´„ã€‘æœæ—¥ãƒã‚¤ã‚­ãƒ³ã‚°ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Diamond+Head+State+Monument" },
                        { time: "09:30", type: "food", title: "Bogart's Cafe", desc: "ã€ãƒ–ãƒ©ãƒ³ãƒã€‘ãƒ•ãƒ©ã‚¤ãƒ‰ãƒ©ã‚¤ã‚¹ãªã©ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Bogart's+Cafe+Honolulu" },
                        { time: "10:30", type: "food", title: "Leonard's Bakery", desc: "ã€ãŠã‚„ã¤ã€‘åç‰©ãƒãƒ©ã‚µãƒ€ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Leonard's+Bakery" },
                        { time: "PM", type: "relax", title: "ãƒ•ãƒªãƒ¼ã‚¿ã‚¤ãƒ ", desc: "ãƒ¯ã‚¤ã‚­ã‚­ãƒ“ãƒ¼ãƒã‚„ãƒ›ãƒ†ãƒ«ãƒ—ãƒ¼ãƒ«ã¸ã€‚", map: null },
                        { time: "19:00", type: "food", title: "Kirin Restaurant", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘ã‚«ãƒ‹æ–™ç†ã®ååº—ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Kirin+Restaurant+Waikiki" }
                    ]
                },
                {
                    id: 4, date: "1/9(é‡‘)", title: "è²·ã„ç‰© & é¦™ã‚Š", icon: "ğŸ›ï¸",
                    summary: "ã‚¢ãƒ©ãƒ¢ã‚¢ãƒŠã§ãŠè²·ã„ç‰©ã€‚å¤œã¯ãƒˆãƒªãƒ¥ãƒ•ã€‚",
                    budgetEst: 200,
                    timeline: [
                        { time: "AM", type: "shop", title: "Ala Moana Center", desc: "æ—¥æœ¬æœªä¸Šé™¸ãƒ–ãƒ©ãƒ³ãƒ‰ç­‰ã‚’ãƒã‚§ãƒƒã‚¯ã€‚", map: null },
                        { time: "13:00", type: "food", title: "Foodland Farms", desc: "ã€ãƒ©ãƒ³ãƒã€‘äººæ°—ã®ãƒã‚­ä¸¼ã‚’ã‚¤ãƒ¼ãƒˆã‚¤ãƒ³ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Foodland+Farms+Ala+Moana" },
                        { time: "18:00", type: "food", title: "Margotto Hawaii", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘ãƒˆãƒªãƒ¥ãƒ•å°½ãã—ã®ã‚³ãƒ¼ã‚¹ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Margotto+Hawaii" }
                    ]
                },
                {
                    id: 5, date: "1/10(åœŸ)", title: "æœå¸‚ & ãƒã‚­", icon: "ğŸ¥",
                    summary: "KCCãƒ•ã‚¡ãƒ¼ãƒãƒ¼ã‚ºãƒãƒ¼ã‚±ãƒƒãƒˆã€‚å¤œã¯è»½ã‚ã«ã€‚",
                    budgetEst: 50,
                    timeline: [
                        { time: "08:30", type: "shop", title: "KCC Farmers Market", desc: "åœŸæ›œé™å®šã€‚é£Ÿã¹æ­©ãã¨ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã€‚", map: "https://www.google.com/maps/search/?api=1&query=KCC+Farmers+Market" },
                        { time: "PM", type: "relax", title: "ãƒ•ãƒªãƒ¼ / æµ·ãƒãƒ«", desc: "ã‚«ãƒ”ã‚ªãƒ©ãƒ‹å…¬åœ’æ•£ç­–ãªã©ã€‚", map: null },
                        { time: "18:00", type: "food", title: "Maguro Spot", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘æ–°é®®ãªãƒã‚­ã‚’ãƒ†ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã—ã¦ãƒ©ãƒŠã‚¤ã§ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Maguro+Spot+Waikiki" }
                    ]
                },
                {
                    id: 6, date: "1/11(æ—¥)", title: "æµ·ãƒãƒ« & ãƒã‚¤ã‚¿ã‚¤", icon: "ğŸ¹",
                    summary: "ãƒ”ãƒ³ã‚¯ãƒ‘ãƒ¬ã‚¹ã§ã®ã‚“ã³ã‚Šã€‚",
                    budgetEst: 80,
                    timeline: [
                        { time: "11:30", type: "relax", title: "ãƒ“ãƒ¼ãƒ / ãƒ•ãƒªãƒ¼", desc: "ã®ã‚“ã³ã‚Šèµ·åºŠã€‚", map: null },
                        { time: "14:00", type: "food", title: "Mai Tai Bar", desc: "ã€ã‚«ãƒ•ã‚§/é…’ã€‘ãƒ”ãƒ³ã‚¯ãƒ‘ãƒ¬ã‚¹ã§ãƒˆãƒªãƒ¥ãƒ•ãƒãƒ†ãƒˆã¨ãƒã‚¤ã‚¿ã‚¤ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Mai+Tai+Bar+Royal+Hawaiian" },
                        { time: "Night", type: "relax", title: "ãƒ•ãƒªãƒ¼ãƒ‡ã‚£ãƒŠãƒ¼", desc: "ãŠè…¹ã®ç©ºãå…·åˆã«åˆã‚ã›ã¦ã€‚", map: null }
                    ]
                },
                {
                    id: 7, date: "1/12(æœˆ)", title: "ãƒãƒ¼ã‚¹ã‚·ãƒ§ã‚¢(è»Š)", icon: "ğŸš—",
                    summary: "ã€ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ã€‘ãƒãƒ¼ã‚¹ã‚·ãƒ§ã‚¢é å¾ã¨çµ¶æ™¯ãƒãƒ¼ã€‚",
                    budgetEst: 150,
                    timeline: [
                        { time: "09:00", type: "transport", title: "ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼å‡ºç™º", desc: "ãƒãƒ¬ã‚¤ãƒ¯æ–¹é¢ã¸ãƒ‰ãƒ©ã‚¤ãƒ–ã€‚", map: null },
                        { time: "11:30", type: "photo", title: "Laniakea Beach", desc: "äº€ã¨ã®é­é‡ç‡é«˜ã—ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Laniakea+Beach" },
                        { time: "12:30", type: "food", title: "Giovanni's Shrimp", desc: "ã€ãƒ©ãƒ³ãƒã€‘å…ƒç¥–ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Giovanni's+Shrimp+Truck+Haleiwa" },
                        { time: "17:30", type: "transport", title: "ãƒ¯ã‚¤ã‚­ã‚­æˆ»ã‚Š", desc: "è»Šè¿”å´ã€‚", map: null },
                        { time: "19:00", type: "food", title: "RumFire", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘æµ·æ²¿ã„ã®çµ¶æ™¯ãƒãƒ¼ã§é£Ÿäº‹ã€‚", map: "https://www.google.com/maps/search/?api=1&query=RumFire+Waikiki" }
                    ]
                },
                {
                    id: 8, date: "1/13(ç«)", title: "å®Œå…¨ãƒ•ãƒªãƒ¼ & è‚‰", icon: "ğŸ†“",
                    summary: "äºˆå‚™æ—¥ã€‚çµ¶å“ã‚¹ãƒ†ãƒ¼ã‚­å¼å½“ãƒ©ãƒ³ãƒã¨ãŠåœŸç”£æ¢ã—ã€‚",
                    budgetEst: 70,
                    timeline: [
                        { time: "11:30", type: "food", title: "Steak Shack", desc: "ã€ãƒ©ãƒ³ãƒã€‘æµ·å°å±‹ã®çµ¶å“ã‚¹ãƒ†ãƒ¼ã‚­å¼å½“ã€‚", map: "https://www.google.com/maps/search/?api=1&query=Steak+Shack+Waikiki" },
                        { time: "PM", type: "relax", title: "Free Time", desc: "æœ€å¾Œã®ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚„æµ·ã€‚", map: null }
                    ]
                },
                {
                    id: 9, date: "1/14(æ°´)", title: "æœ€çµ‚æ—¥ãƒ‡ã‚£ãƒŠãƒ¼", icon: "ğŸ½ï¸",
                    summary: "æœ€å¾Œã®å¤œã¯å¤œæ™¯ã®è¦‹ãˆã‚‹ã‚¹ãƒ†ãƒ¼ã‚­ãƒã‚¦ã‚¹ã§ã€‚",
                    budgetEst: 150,
                    timeline: [
                        { time: "Eve", type: "food", title: "Signature Prime Steak", desc: "ã€ãƒ‡ã‚£ãƒŠãƒ¼ã€‘36éšã‹ã‚‰ã®å¤œæ™¯ã¨ã‚µãƒ³ã‚»ãƒƒãƒˆã€‚", map: "https://www.google.com/maps/search/?api=1&query=The+Signature+Prime+Steak+%26+Seafood" },
                        { time: "Night", type: "hotel", title: "ãƒ‘ãƒƒã‚­ãƒ³ã‚°", desc: "é‡é‡ã‚ªãƒ¼ãƒãƒ¼ã«æ³¨æ„ã€‚", map: null }
                    ]
                },
                {
                    id: 10, date: "1/15(æœ¨)", title: "å¸°å›½", icon: "âœˆï¸",
                    summary: "ãƒ›ãƒãƒ«ãƒ«ç©ºæ¸¯ã‹ã‚‰æ—¥æœ¬ã¸ã€‚",
                    budgetEst: 0,
                    timeline: [
                        { time: "08:00", type: "transport", title: "ç©ºæ¸¯ã¸ç§»å‹•", desc: "Uber/ã‚¿ã‚¯ã‚·ãƒ¼ã§ç§»å‹•ã€‚", map: null },
                        { time: "10:55", type: "transport", title: "JL791 å‡ºç™º", desc: "Mahalo!", map: null }
                    ]
                }
            ],
            packing: [
                { item: "ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ & eãƒã‚±ãƒƒãƒˆ", checked: false },
                { item: "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ (JCBæ¨å¥¨)", checked: false },
                { item: "é‹è»¢å…è¨±è¨¼ & å›½éš›å…è¨±", checked: false, note: "Day7ã§å¿…é ˆ" },
                { item: "æ­¯ãƒ–ãƒ©ã‚· & ã‚¹ãƒªãƒƒãƒ‘", checked: false },
                { item: "ã‚¨ã‚³ãƒãƒƒã‚°", checked: false },
                { item: "ä¸Šç€/ãƒ‘ãƒ¼ã‚«ãƒ¼", checked: false, note: "å†·æˆ¿å¯¾ç­–" },
                { item: "è¥Ÿä»˜ãã‚·ãƒ£ãƒ„ & é•·ã‚ºãƒœãƒ³", checked: false, note: "ç”·æ€§ãƒ‰ãƒ¬ã‚¹ã‚³ãƒ¼ãƒ‰ç”¨" }
            ]
        };

        const app = {
            state: { currentView: 'dashboard', selectedDay: 1 },
            init() { this.render(); this.initCharts(); },
            navigate(view) {
                this.state.currentView = view;
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                document.getElementById(`nav-${view}`).classList.add('active');
                window.scrollTo(0,0);
                this.render();
                if (view === 'dashboard') setTimeout(() => this.initCharts(), 50);
            },
            render() {
                const c = document.getElementById('app-content');
                c.innerHTML = '';
                if(this.state.currentView === 'dashboard') c.innerHTML = this.views.dashboard();
                else if(this.state.currentView === 'itinerary') c.innerHTML = this.views.itinerary();
                else if(this.state.currentView === 'spots') c.innerHTML = this.views.spots();
                else if(this.state.currentView === 'packing') c.innerHTML = this.views.packing();
            },
            views: {
                dashboard() {
                    return `
                        <div class="mb-6 bg-white p-5 rounded-2xl shadow-sm border border-stone-100">
                            <h2 class="text-xl font-bold text-teal-800 mb-2">Aloha! æ—…ã®æ¦‚è¦</h2>
                            <p class="text-stone-600 text-sm mb-4 leading-relaxed">${tripData.meta.theme}</p>
                            <div class="bg-stone-50 p-4 rounded-xl flex items-center gap-3">
                                <span class="text-2xl">ğŸ¨</span>
                                <div><div class="font-bold text-stone-800 text-sm">${tripData.meta.hotel} (8æ³Š)</div><div class="text-xs text-teal-600">æœé£Ÿä»˜ã</div></div>
                            </div>
                        </div>
                        <div class="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-6">
                            <h3 class="font-bold text-stone-700 mb-4 flex items-center gap-2 text-sm"><span>ğŸ’°</span> æ—¥åˆ¥äºˆç®—ç›®å®‰ ($)</h3>
                            <div class="chart-wrapper"><canvas id="budgetChart"></canvas></div>
                        </div>
                    `;
                },
                itinerary() {
                    const tabs = tripData.days.map(d => `<button onclick="app.selectDay(${d.id})" class="flex-shrink-0 px-5 py-4 rounded-xl text-center transition-all snap-center ${app.state.selectedDay===d.id?'bg-teal-600 text-white shadow-md scale-105':'bg-white text-stone-600 border border-stone-200'}"><div class="text-[10px] opacity-80 mb-1">${d.date}</div><div class="text-sm font-bold whitespace-nowrap">Day ${d.id}</div></button>`).join('');
                    const current = tripData.days.find(d => d.id === app.state.selectedDay);
                    const timeline = current.timeline.map(t => {
                        let icon = 'ğŸ“', color = 'bg-stone-100 text-stone-600';
                        if(t.type==='food'){icon='ğŸ½ï¸';color='bg-orange-50 text-orange-600';}
                        if(t.type==='activity'){icon='ğŸ¤¿';color='bg-blue-50 text-blue-600';}
                        if(t.type==='shop'){icon='ğŸ›ï¸';color='bg-pink-50 text-pink-600';}
                        return `<div class="relative pl-8 pb-8 border-l-2 border-stone-100 last:border-0"><div class="absolute -left-[17px] top-0 w-8 h-8 rounded-full ${color} flex items-center justify-center border-4 border-white shadow-sm text-sm z-10">${icon}</div><div class="bg-white p-4 rounded-xl border border-stone-100 shadow-sm"><div class="flex justify-between items-start mb-2"><h4 class="font-bold text-stone-800 text-sm">${t.title}</h4><span class="text-[10px] bg-stone-50 px-2 py-1 rounded text-stone-400">${t.time}</span></div><p class="text-xs text-stone-600 mb-3">${t.desc}</p>${t.map?`<a href="${t.map}" target="_blank" class="inline-flex items-center text-xs text-teal-600 font-bold py-1 px-2 bg-teal-50 rounded">ğŸ“ Map</a>`:''}</div></div>`;
                    }).join('');
                    return `<div class="mb-4"><h2 class="text-xl font-bold text-teal-800">Day ${current.id}: ${current.title}</h2><p class="text-stone-500 text-xs">${current.summary}</p></div><div class="flex overflow-x-auto no-scrollbar gap-3 pb-4 mb-2 snap-x px-1">${tabs}</div><div class="bg-stone-50 p-5 rounded-2xl border border-stone-200"><div class="mt-2">${timeline}</div></div>`;
                },
                spots() {
                    const spots = tripData.days.flatMap(d => d.timeline.filter(t => ['food','activity','shop'].includes(t.type)).map(t => ({...t, day: d.id})));
                    const unique = spots.filter((v,i,a)=>a.findIndex(v2=>v2.title===v.title)===i);
                    return `<div class="grid grid-cols-1 sm:grid-cols-2 gap-3">${unique.map(s => `<div class="bg-white p-4 rounded-xl shadow-sm border border-stone-100"><div class="flex justify-between mb-2"><span class="text-[10px] px-2 py-1 rounded-full bg-stone-100 font-bold">Day ${s.day}</span></div><h4 class="font-bold text-stone-800 text-sm mb-1">${s.title}</h4><p class="text-xs text-stone-600 mb-2">${s.desc}</p>${s.map?`<a href="${s.map}" target="_blank" class="text-teal-600 text-xs font-bold">Map â†—</a>`:''}</div>`).join('')}</div>`;
                },
                packing() {
                    return `<div class="flex flex-col gap-3">${tripData.packing.map((i,x) => `<label class="flex items-center gap-4 p-4 bg-white rounded-xl border border-stone-200"><input type="checkbox" ${i.checked?'checked':''} onchange="app.toggleCheck(${x})" class="w-6 h-6 text-teal-600 rounded"><div class="${i.checked?'line-through text-stone-400':''} text-sm font-medium">${i.item}${i.note?`<span class="block text-[10px] text-orange-500">${i.note}</span>`:''}</div></label>`).join('')}</div>`;
                }
            },
            selectDay(id) { this.state.selectedDay = id; this.render(); },
            toggleCheck(idx) { tripData.packing[idx].checked = !tripData.packing[idx].checked; this.render(); },
            initCharts() {
                const ctx = document.getElementById('budgetChart');
                if(ctx) new Chart(ctx, { type: 'bar', data: { labels: tripData.days.slice(0,9).map(d=>`Day ${d.id}`), datasets: [{ data: tripData.days.slice(0,9).map(d=>d.budgetEst), backgroundColor: '#ccfbf1', borderColor: '#0d9488', borderWidth: 1, borderRadius: 4 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true }, x: { grid: { display: false } } } } });
            }
        };
        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>
</body>
</html>
